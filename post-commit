#!/bin/bash
# Post-commit hook for Codex supervision
# This ensures Codex logs each step in codex_log.md

echo "üîç Post-commit: Verifying Codex compliance..."

# Check if this is a Codex commit (contains step format)
if git log --format=%B -n 1 | grep -q "^Step [0-9]\+:"; then
    echo "‚úÖ Codex step commit detected"
    
    # Verify codex_log.md was updated
    if git diff --name-only HEAD~1 | grep -q "codex_log.md"; then
        echo "‚úÖ codex_log.md was updated"
    else
        echo "‚ö†Ô∏è  WARNING: Codex commit without log update"
    fi
else
    echo "‚ÑπÔ∏è  Regular commit (not Codex step)"
fi

echo "‚úÖ Post-commit check complete"